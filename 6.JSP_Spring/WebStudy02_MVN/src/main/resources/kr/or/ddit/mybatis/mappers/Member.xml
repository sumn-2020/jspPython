<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.member.dao.MemberDAO"> <!--  interface 퀄리파이드네임 필요  -->

<!-- select했을 때 데이터가 출력 안됐던 이유  -->
<!-- resultMap => mem_id : 카멜케이스 인식 안되기 때문에 자동으로 오토바인딩이 되어버리기때문에 setMem_id (이러한 것은 vo에 없음 )호출하게 됨  -->
<!--  resultMap="memberMap" => 오토 말고 이제 수동으로 하겠다  -->
<!-- 	<resultMap type="memberVO" id="memberMap">
		<result property="memId" column="MEM_ID" /> 스네이크를 카멜로 바꾸겠다 
	</resultMap>
	
	<select id="selectMemberList" resultMap="memberMap">
		SELECT  mem_id, MEM_NAME, MEM_MAIL, MEM_HP,  MEM_ADD1, MEM_ADD2, MEM_MILEAGE
		FROM   member 
	</select> -->
	
	
<!-- 	config.xml
<settings>
		<setting name="mapUnderscoreToCamelCase" value="true"/>  스네이크를 카멜로 자동으로 바꿔줌 
	</settings> -->
	
	<select id="selectMemberList" resultType="MemberVO">
		SELECT  mem_id, MEM_NAME, MEM_MAIL, MEM_HP,  MEM_ADD1, MEM_ADD2, MEM_MILEAGE
		FROM   member 
	</select>
	
	
	<select id="selectMember" parameterType="string" resultType="MemberVO">		
		
		SELECT 
	    mem_id, mem_pass,  mem_name,                                 
	    mem_regno1,mem_regno2,                                       
	    to_char(mem_bir, 'YYYY-MM-DD') mem_bir,                      
	    mem_zip, mem_add1,  mem_add2,                                
	    mem_hometel, mem_comtel,  mem_hp,                            
	    mem_mail, mem_job, mem_like,                                 
	    mem_memorial,                                                
	    to_char(mem_memorialday, 'YYYY-MM-DD') mem_memorialday,      
	    mem_mileage,  mem_delete                                     
		FROM                                                         
		    member                                                   
		where mem_id = #{memId}  
		                                           
	</select>
	
	
	
	<insert id="insertMember" parameterType="MemberVO">
		INSERT INTO MEMBER(
			 MEM_ID
			,MEM_PASS
			,MEM_NAME
			,MEM_REGNO1
			,MEM_REGNO2
			,MEM_BIR
			,MEM_ZIP
			,MEM_ADD1
			,MEM_ADD2
			,MEM_HOMETEL
			,MEM_COMTEL
			,MEM_HP
			,MEM_MAIL
			,MEM_JOB
			,MEM_LIKE
			,MEM_MEMORIAL
			,MEM_MEMORIALDAY
			,MEM_MILEAGE
			,MEM_DELETE

		)VALUES(
			#{memId, jdbcType=VARCHAR}
			, #{memPass, jdbcType=VARCHAR}
			, #{memName, jdbcType=VARCHAR}
			, #{memRegno1, jdbcType=CHAR}
			, #{memRegno2, jdbcType=CHAR}
			, TO_DATE(#{memBir, jdbcType=DATE}, 'YYYY-MM-DD')
			, #{memZip, jdbcType=CHAR}
			, #{memAdd1, jdbcType=VARCHAR}
			, #{memAdd2, jdbcType=VARCHAR}
			, #{memHometel, jdbcType=VARCHAR}
			, #{memComtel, jdbcType=VARCHAR}
			, #{memHp, jdbcType=VARCHAR}
			, #{memMail, jdbcType=VARCHAR}
			, #{memJob, jdbcType=VARCHAR}
			, #{memLike, jdbcType=VARCHAR}
			, #{memMemorial, jdbcType=VARCHAR}
			, TO_DATE(#{memMemorialday, jdbcType=DATE}, 'YYYY-MM-DD')
			, #{memMileage, jdbcType=NUMERIC}
			, #{memDelete, jdbcType=VARCHAR}
		)
	</insert>
	
	<!-- 이름, 아이디, 마일리지 등은 사용자가 임의로 수정불가하기 때문에 작성할 필요x -->
	<update id="updateMember" parameterType="MemberVO">
	
		update member 
		set    
			MEM_REGNO1 = #{memRegno1, jdbcType=CHAR}
			, MEM_REGNO2 = #{memRegno2, jdbcType=CHAR}
			, MEM_ZIP = #{memZip, jdbcType=CHAR}
			, MEM_ADD1 = #{memAdd1, jdbcType=VARCHAR}
			, MEM_ADD2 = #{memAdd2, jdbcType=VARCHAR}
			, MEM_HOMETEL = #{memHometel, jdbcType=VARCHAR}
			, MEM_COMTEL = #{memComtel, jdbcType=VARCHAR}
			, MEM_HP = #{memHp, jdbcType=VARCHAR}
			, MEM_MAIL = #{memMail, jdbcType=VARCHAR}
			, MEM_JOB = #{memJob, jdbcType=VARCHAR}
			, MEM_LIKE = #{memLike, jdbcType=VARCHAR}
			, MEM_MEMORIAL = #{memMemorial, jdbcType=VARCHAR}
			, MEM_MEMORIALDAY = TO_DATE(#{memMemorialday, jdbcType=DATE},'YYYY-MM-DD')
		WHERE MEM_ID = #{memId}

	</update>
	
	
	
	
	




</mapper>